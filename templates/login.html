{% include 'header.html' %}

<body class="body-bg">
    <div class="loader">
        <div class="spinner">
            <img src="static/cg-img/circle1.jpg" alt="" />
        </div>
    </div>



    <!-- Main Body -->
    <section>

        <div
            class="bg-image col-auto d-flex flex-column justify-content-center align-items-center align-self-center m-auto">
            <div class="row d-flex justify-content-center">
                <div class="col">
                    <div class="container" style="margin-top: 300px;">

                        <div>

                            <form class="text-center" method="post" action="/login">
                                <div class="row mb-3">
                                    <div class="col">
                                        <div class="input-group form-control">
                                            <input class="col-9 lr" type="email" name="email" id="emailInput"
                                                placeholder="Email address">
                                            <span class="col-3 email" id="emailIcon">
                                                <img src="{{ url_for('static', filename='/cg-img/mail-c.jpg') }}"
                                                    alt="email icon">
                                            </span>
                                        </div>
                                    </div>
                                </div>



                                <div class="row mb-3">
                                    <div class="col">
                                        <div class="input-group form-control">
                                            <input class="col-9 lr" type="password" name="password" id="passwordInput"
                                                placeholder="Password">
                                            <span class="col-3 email">
                                                <img src="{{ url_for('static', filename='/cg-img/eye-c.jpg') }}"
                                                    alt="password" id="passwordToggle" onclick="togglePassword()">
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                {% if error_msg %}
                           
                            <!-- Add the pop-up container -->
                            <div id="errorPopup" class="popup">
                                <div class="row popup-content">
                                    <!-- Display the error message here -->
                                    <div class="col-9 poptext">
                                        <h3 class="text-danger" id="errorMessage">{{ error_msg }}</h3>
                                    </div>
                                    <div class="col-3">
                                        <span class="close" id="closePopup">&times;</span>
                                    </div>
                                    <!-- Add a close button for the pop-up -->
                                   
                                </div>
                            </div>

                            {% endif %}

                                <a href="/forgot_password" class="p1">Forgot Password?</a>

                                <div class="d-grid mt-4" style="justify-content: center;">
                                    <button class="lb1" type="submit">Login</button>
                                </div>
                        </div>
                        <p class="text-muted mt-4 p1">Don't have an Account? <a href="/register" class="su">Sign
                                Up</a></p>

                        </form>

                    </div>
                </div>
            </div>
        </div>

    </section>

    {% include 'footer.html' %}


    <script>
        // Get references to the input and icon elements
        var emailInput = document.getElementById('emailInput');
        var emailIcon = document.getElementById('emailIcon').querySelector('img');

        // Add event listener for input change
        emailInput.addEventListener('input', function () {
            // Check if the input value resembles an email address
            var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailPattern.test(emailInput.value)) {
                // Change the email icon when a valid email is entered
                emailIcon.src = "{{ url_for('static', filename='/cg-img/mail-o.jpg') }}";
            } else {
                // Revert to the default email icon if the input is not a valid email
                emailIcon.src = "{{ url_for('static', filename='/cg-img/mail-c.jpg') }}";
            }
        });
    </script>


    <script>
        function togglePassword() {
            var passwordInput = document.getElementById("passwordInput");
            var passwordToggle = document.getElementById("passwordToggle");

            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                passwordToggle.src = "{{ url_for('static', filename='/cg-img/eye-o.jpg') }}"; // Change the image to hide password
            } else {
                passwordInput.type = "password";
                passwordToggle.src = "{{ url_for('static', filename='/cg-img/eye-c.jpg') }}"; // Change the image to show password
            }
        }
    </script>
    <script>
        // Get the pop-up container and the close button
    var popup = document.getElementById('errorPopup');
    var closeBtn = document.getElementById('closePopup');
    
    // Get the error message element
    var errorMessage = document.getElementById('errorMessage');
    
    // Function to show the pop-up if the error message is present
    window.onload = function() {
        if (errorMessage.innerHTML.trim() !== '') {
            popup.style.display = 'block';
        }
    }
    
    // Function to close the pop-up when the close button is clicked
    closeBtn.onclick = function() {
        popup.style.display = 'none';
    }
    
    // Function to close the pop-up when the user clicks outside the pop-up
    window.onclick = function(event) {
        if (event.target == popup) {
            popup.style.display = 'none';
        }
    }
    
    </script>
    

</body>



</html>